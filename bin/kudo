#!/usr/bin/env babel-node

import config from '../lib/config';
import {deduce} from '../lib/cli';

/**
 * 显示 package.json 中的版本号
 */
function displayVersion() {
    let pkg = require('../package');
    console.log('%s %s', pkg.name, pkg.version);
}

/**
 * 命令入口
 */
function run() {
    let options = config(process.argv.slice(2));

    if (options.version) {
        return displayVersion();
    }

    let [name, since] = options._;
    since = since || options.since;

    if (!name) {
        console.log('USAGE:');
        console.log('\tscout <author> [--since=\'3.months.ago\']');
        console.log('\tscout <author> [\'3.months.ago\']');
        return;
    }

    deduce(name, since);
}

run();

